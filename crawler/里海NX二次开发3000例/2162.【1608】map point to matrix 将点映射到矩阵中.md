### 【1608】map point to matrix 将点映射到矩阵中

#### 代码

```cpp
    static void map_point_to_matrix(tag_t matrix, double *pos)  
    {  
        int  
            irc;  
        double  
            abs_mx[9] = { 0,0,0, 1,0,0, 0,1,0 },  
            csys[12] = { 0,0,0,0,0,0,0,0,0,0,0,0},  
            mx[12];  
        UF_CALL(UF_CSYS_ask_matrix_values(matrix, &csys[3]));  
        FTN(uf5940)(abs_mx, csys, mx, &irc);  
        FTN(uf5941)(pos, mx);  
    }

```

#### 代码解析

> 这是NX Open C++ API编写的代码，主要实现的功能是获取NX中指定的坐标系（由matrix参数指定）的转换矩阵，并将该转换矩阵应用于一个点的坐标（由pos参数指定），以实现坐标系到坐标系之间的坐标变换。
>
> 具体步骤如下：
>
> 1. 定义一个数组abs_mx，用于存储绝对坐标系（即世界坐标系）的转换矩阵。初始时，这个绝对坐标系与当前坐标系重合，因此abs_mx是一个单位矩阵。
> 2. 定义一个数组csys，用于存储要变换到的目标坐标系的信息。通过调用UF_CSYS_ask_matrix_values函数，从NX中获取目标坐标系的转换矩阵，并存储在csys数组中。
> 3. 定义一个数组mx，用于存储最终得到的转换矩阵。通过调用uf5940函数，将abs_mx和csys相乘，得到从绝对坐标系到目标坐标系的转换矩阵，存储在mx数组中。
> 4. 最后，调用uf5941函数，将pos数组中的点坐标通过mx转换矩阵进行变换，得到该点在目标坐标系下的新坐标。
>
> 综上所述，该代码实现了从一个坐标系到另一个坐标系的坐标变换。通过获取两个坐标系的转换矩阵，并进行矩阵乘法运算，最终得到点的新坐标。
>
